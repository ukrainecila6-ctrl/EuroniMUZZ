{% extends "base.html" %}
{% block content %}
<section class="search-area">
  <h2>Поиск</h2>
  <form class="search-form" method="post">
    <input type="text" name="q" placeholder="Название или исполнитель" value="{{ query|default('') }}" required>
    <button class="btn" type="submit">Найти</button>
  </form>

  {% if results %}
    <ul class="results-grid">
    {% for r in results %}
      <li class="track-item" data-preview="{{ r.previewUrl }}" data-title="{{ r.trackName }}" data-artist="{{ r.artistName }}" data-cover="{{ r.artworkUrl100 }}">
        <img class="cover" src="{{ r.artworkUrl100 }}" alt="{{ r.trackName }}">
        <div class="meta"><strong>{{ r.trackName }}</strong><span>{{ r.artistName }}</span></div>
        {% if r.previewUrl %}
          <button class="play-btn">▶ Слушать</button>
        {% else %}
          <button class="play-btn" disabled>Нет превью</button>
        {% endif %}
      </li>
    {% endfor %}
    </ul>
  {% endif %}
</section>
{% endblock %}
