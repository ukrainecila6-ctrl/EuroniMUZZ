{% extends "base.html" %}
{% block content %}
<section class="panel">
  <h2>Подбор рекомендаций</h2>
  <p class="muted">Расскажите немного — я соберу плейлист под вас.</p>

  <form class="recommend-form" method="post" action="{{ url_for('recommend') }}">
    <div class="grid">
      <label>Жанр
        <select name="genre">
          <option value="">(Любой)</option>
          <option value="pop">Поп</option>
          <option value="rap">Рэп</option>
          <option value="hip-hop">Хип-хоп</option>
          <option value="rock">Рок</option>
          <option value="metal">Метал</option>
          <option value="jazz">Джаз</option>
        </select>
      </label>

      <label>Настроение
        <select name="mood">
          <option value="">(Любое)</option>
          <option value="весёлое">Весёлое</option>
          <option value="грустное">Грустное</option>
          <option value="злостное">Злостное</option>
          <option value="нейтральное">Нейтральное</option>
        </select>
      </label>

      <label>Занятие
        <select name="activity">
          <option value="">(Любое)</option>
          <option value="отдых">Отдых</option>
          <option value="тренировка">Тренировка</option>
          <option value="поездка">Поездка</option>
          <option value="учёба">Учёба</option>
        </select>
      </label>

      <label>Страна
        <select name="country">
          <option value="">(Любая)</option>
          <option value="Russia">Россия</option>
          <option value="USA">США</option>
          <option value="Japan">Япония</option>
          <option value="UK">Великобритания</option>
          <option value="Canada">Канада</option>
          <option value="Norway">Норвегия</option>
          <option value="Finland">Финляндия</option>
          <option value="Other">Другое</option>
        </select>
      </label>

      <label>Сколько вас
        <select name="people">
          <option value="Один">Один</option>
          <option value="В компании">В компании</option>
        </select>
      </label>

      <label>Время суток
        <select name="time_of_day">
          <option value="">(Любое)</option>
          <option value="утро">Утро</option>
          <option value="день">День</option>
          <option value="вечер">Вечер</option>
          <option value="ночь">Ночь</option>
        </select>
      </label>
    </div>

    <div class="actions">
      <button class="btn" type="submit">Показать подборку</button>
    </div>
  </form>

  {% if submitted %}
    <h3 class="muted">Результаты</h3>
  {% endif %}

  {% if recommendations %}
    <ul class="results-grid">
      {% for s in recommendations %}
        <li class="track-item" data-preview="{{ s.previewUrl }}" data-title="{{ s.trackName }}" data-artist="{{ s.artistName }}" data-cover="{{ s.artworkUrl100 }}">
          <img class="cover" src="{{ s.artworkUrl100 }}" alt="{{ s.trackName }}">
          <div class="meta"><strong>{{ s.trackName }}</strong><span>{{ s.artistName }}</span></div>
          <button class="play-btn">▶ Слушать</button>
        </li>
      {% endfor %}
    </ul>
  {% endif %}
</section>
{% endblock %}
